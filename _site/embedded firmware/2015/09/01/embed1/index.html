<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
  <!-- Enable responsiveness on mobile devices-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">-->
 

  <title>
    
      MBED Setup Documentation &middot; 
      pyVision
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/pyVision/public/css/poole.css">
  <link rel="stylesheet" href="/pyVision/public/css/syntax.css">
  <link rel="stylesheet" href="/pyVision/public/css/lanyon.css">
  <!--<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">-->
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/pyVisionpublic/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/pyVisionpublic/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({ 
                config: ["MMLorHTML.js"], 
                extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"], 
                jax: ["input/TeX"], 
                tex2jax: { 
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ], 
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ], 
                    processEscapes: false 
                }, 
                TeX: { 
                    TagSide: "right", 
                    TagIndent: ".8em", 
                    MultLineWidth: "85%", 
                    equationNumbers: { 
                       autoNumber: "AMS", 
                    }, 
                    unicode: { 
                       fonts: "STIXGeneral,'Arial Unicode MS'" 
                    } 
                }, 
                showProcessingMessages: false 
            }); 
</script>
<!--<script src="/pyVision/javascripts/gitdata.js"></script>-->
	<script type="text/javascript">
    	$(function() {
        $("#display-projects").getRepos("pi19404"); //Add your github username.
    	});
	</script>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<link href='http://alexgorbatchev.com/pub/sh/2.1.364/styles/shCore.css' rel='stylesheet' type='text/css'/> 
<link href='http://alexgorbatchev.com/pub/sh/2.1.364/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/> 
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shCore.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCpp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCSharp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCss.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushJava.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushJScript.js' type='text/javascript' /> </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPhp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPython.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushRuby.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushSql.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushVb.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushXml.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPerl.js' type='text/javascript' > </script>
<script language='javascript'> 
SyntaxHighlighter.config.bloggerMode = false;
SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38535188-2', 'auto');
  ga('send', 'pageview');

</script>
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">





  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/pyVision/">Home </a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/pyVision//about/">About</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    

    <!-- <a class="sidebar-nav-item" href="http://www.github.com/pi19404/pyVision/zipball/master">Download</a>
    <a class="sidebar-nav-item" href="http://www.github.com/pi19404/pyVision">GitHub project</a> -->
    <a class="sidebar-nav-item" ><g:plusone size="medium">Categories</g:plusone> </a>
    <div>
      <ul>
        
        
        <li><a href="/pyVision//category/Linux/index.html">Linux</a></li>
        
        
        <li><a href="/pyVision//category/Signal+Processing/index.html">Signal Processing</a></li>
        
        
        <li><a href="/pyVision//category/Raspberry+PI/index.html">Raspberry PI</a></li>
        
        
        <li><a href="/pyVision//category/Software/index.html">Software</a></li>
        
        
        <li><a href="/pyVision//category/Embedded+Firmware/index.html">Embedded Firmware</a></li>
        
        
        <li><a href="/pyVision//category/Software+Installation/index.html">Software Installation</a></li>
        
        
        <li><a href="/pyVision//category/Software+installation/index.html">Software installation</a></li>
        
        </ul>
    
    </div>
<a class="sidebar-nav-item" >
<div class='g-person' data-href='https://plus.google.com/115840780257908006648' data-layout='landscape' data-rel='author' data-showcoverphoto='false' data-showtagline='false' data-theme='dark' data-width='100'></a>
</div>

<div class='widget-content'>
<script type="text/javascript" src="http://jj.revolvermaps.com/2/1.js?i=9bj6dpaloim&amp;s=220&amp;m=7&amp;v=true&amp;r=true&amp;b=ffffff&amp;n=false&amp;c=ff0000" async="async"></script>
</div>

<script type="text/javascript">
function cantload() {
img = document.getElementById("clustrMapsImg");
img.onerror = null;
img.src = "http://www2.clustrmaps.com/images/clustrmaps-back-soon.jpg";
document.getElementById("clustrMapsLink").href = "http://www2.clustrmaps.com";
}
img = document.getElementById("clustrMapsImg");
img.onerror = cantload;
</script>
<div class='widget-content'>
<div id="clustrmaps-widget"></div><script type="text/javascript">var _clustrmaps = {'url' : 'http://pi-virtualworld.blogspot.com', 'user' : 1165875, 'server' : '3', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2015-04-05', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www3.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript><a href="http://www3.clustrmaps.com/user/ace11ca33"><img src="http://www3.clustrmaps.com/stats/maps-no_clusters/pi-virtualworld.blogspot.com-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript>
</a>

<!-- Copyright (c)2009 Site Meter -->


</div>

<div class='widget-content'>
<script type="text/javascript" src="http://feedjit.com/serve/?vv=1022&amp;tft=3&amp;dd=0&amp;wid=f31e21a2d981f025&amp;pid=0&amp;proid=0&amp;bc=000000&amp;tc=F5F5F5&amp;brd1=454545&amp;lnk=C95050&amp;hc=FFFFFF&amp;hfc=5C5A5A&amp;btn=8A0214&amp;ww=200&amp;went=10"></script><noscript><a href="http://feedjit.com/">Feedjit Live Blog Stats</a></noscript>
</div>
 
<!-- Site Meter -->
<script type="text/javascript" src="http://s30.sitemeter.com/js/counter.js?site=s30pi19404">
</script>
<noscript>
<a href="http://s30.sitemeter.com/stats.asp?site=s30pi19404" target="_top">
<img src="http://s30.sitemeter.com/meter.asp?site=s30pi19404" alt="Site Meter" border="0"/></a>
</noscript>   
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2022. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      
        <div class="container">
          <h1 class="header">
            <a href="/" title="Home">pyVision</a></br>
            <small>A Machine Learning and Signal Processing toolbox</small>
          </h1>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/pi19404/pyVision/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/pi19404/pyVision/tarball/master" id="download-tar-gz" class="button"><span>Download.tar.gz</span></a>
          <a href="https://github.com/pi19404/pyVision" id="view-on-github" class="button"><span>View on GitHub</span></a>
		
	   <hr>
          </section>
    
	</br>	</br>
      <div class="content">
        <article class="post">
  <h1 class="post-title">MBED Setup Documentation</h1>
  <span class="post-date">01 Sep 2015</span>
  <blockquote>
  <p><strong>MBED Setup</strong></p>
</blockquote>

<p>###<strong>Prerequisites</strong></p>

<p>Mbed test suite and build scripts are Python 2.7 applications and require Python 2.7 runtime environment and <a href="https://pythonhosted.org/an_example_pypi_project/setuptools.html">setuptools</a> to install dependencies.</p>

<ul>
  <li>Install <a href="https://www.python.org/download/releases/2.7">Python 2.7</a> programming language.</li>
  <li>Install <a href="https://pythonhosted.org/an_example_pypi_project/setuptools.html#installing-setuptools-and-easy-install">setuptools</a></li>
  <li>Optionally you can install <a href="https://pip.pypa.io/en/latest/installing.html">pip</a> which is the PyPA recommended tool for installing Python packages from command line.</li>
</ul>

<p>Mbed SDK in its repo root directory specifies <code class="language-plaintext highlighter-rouge">setup.py</code> file which holds information about all packages which are dependencies for it.</p>

<p>First, clone mbed SDK repo and go to mbed SDK repo’s directory:</p>

<p>From a command line with Git installed, run the following command in a directory where you wish mbed to be stored:</p>

<blockquote>
  <p>$ git clone https://github.com/mbedmicro/mbed.git</p>
</blockquote>

<p>Or</p>

<blockquote>
  <p>Download mbed sources https://github.com/mbedmicro/mbed</p>
</blockquote>

<p><strong>Installing Tools</strong></p>

<p>Second, invoke <code class="language-plaintext highlighter-rouge">setup.py</code> so <code class="language-plaintext highlighter-rouge">setuptools</code> can install mbed SDK’s dependencies (external Python modules required by mbed SDK):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo python setup.py install
</code></pre></div></div>

<p>###<strong>Download and Install GCC ARM ToolChain</strong></p>

<ul>
  <li>Download toolchain for <a href="https://launchpad.net/gcc-arm-embedded/4.9/4.9-2015-q1-update/+download/gcc-arm-none-eabi-4_9-2015q1-20150306-linux.tar.bz2">gcc-arm-none-eabi-4_9-2015q</a></li>
  <li>Or Follow the instructions at <a href="https://launchpad.net/~terry.guo/+archive/ubuntu/gcc-arm-embedded">here</a></li>
</ul>

<p>For example, if you want to change the path to your GNU Tools for ARM Embedded Processors to a path like <code class="language-plaintext highlighter-rouge">c:/arm_gcc/bin</code>, you simply need to have a <code class="language-plaintext highlighter-rouge">workspace_tools/private_settings.py</code> that contains following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; GCC_ARM_PATH = "c:/arm_gcc/bin"
</code></pre></div></div>

<h3 id="workspace-tools"><strong>Workspace tools</strong></h3>

<p>Workspace tools are set of Python scripts used off-line by Mbed SDK team to:</p>

<ul>
  <li>Compile and build mbed SDK,</li>
  <li>Compile and build libraries included in mbed SDK repo like e.g. ETH (Ethernet), USB, RTOS or CMSIS,</li>
  <li>Compile, build and run mbed SDK tests,</li>
  <li>Run test regression locally and in CI server,</li>
  <li>Get library, target, test configuration (paths, parameters, names etc.).</li>
</ul>

<h3 id="configure-workspace-tools-to-work-with-your-compilers"><strong>Configure workspace tools to work with your compilers</strong></h3>

<p>we need to tell workspace tools where our compilers are.</p>

<ul>
  <li>Go <code class="language-plaintext highlighter-rouge">mbed/workspace_tools/</code> directory and create empty file called <code class="language-plaintext highlighter-rouge">private_settings.py</code>.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ touch private_settings.py
</code></pre></div></div>

<ul>
  <li>Populate this file the Python code below:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
 
<span class="c1"># ARMCC
</span><span class="n">ARM_PATH</span> <span class="o">=</span> <span class="s">"C:/Work/toolchains/ARMCompiler_5.03_117_Windows"</span>
<span class="n">ARM_BIN</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">ARM_PATH</span><span class="p">,</span> <span class="s">"bin"</span><span class="p">)</span>
<span class="n">ARM_INC</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">ARM_PATH</span><span class="p">,</span> <span class="s">"include"</span><span class="p">)</span>
<span class="n">ARM_LIB</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">ARM_PATH</span><span class="p">,</span> <span class="s">"lib"</span><span class="p">)</span>
 
<span class="n">ARM_CPPLIB</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">ARM_LIB</span><span class="p">,</span> <span class="s">"cpplib"</span><span class="p">)</span>
<span class="n">MY_ARM_CLIB</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">ARM_PATH</span><span class="p">,</span> <span class="s">"lib"</span><span class="p">,</span> <span class="s">"microlib"</span><span class="p">)</span>
 
<span class="c1"># GCC ARM
</span><span class="n">GCC_ARM_PATH</span> <span class="o">=</span> <span class="s">"C:/Work/toolchains/gcc_arm_4_8/4_8_2013q4/bin"</span>
 
<span class="c1"># GCC CodeSourcery
</span><span class="n">GCC_CS_PATH</span> <span class="o">=</span> <span class="s">"C:/Work/toolchains/Sourcery_CodeBench_Lite_for_ARM_EABI/bin"</span>
 
<span class="c1"># GCC CodeRed
</span><span class="n">GCC_CR_PATH</span> <span class="o">=</span> <span class="s">"C:/Work/toolchains/LPCXpresso_6.1.4_194/lpcxpresso/tools/bin"</span>
 
<span class="c1"># IAR
</span><span class="n">IAR_PATH</span> <span class="o">=</span> <span class="s">"C:/Work/toolchains/iar_6_5/arm"</span>
 
<span class="n">SERVER_ADDRESS</span> <span class="o">=</span> <span class="s">"127.0.0.1"</span>
<span class="n">LOCALHOST</span> <span class="o">=</span> <span class="s">"127.0.0.1"</span>
 
<span class="c1"># This is moved to separate JSON configuration file used by singletest.py
</span><span class="n">MUTs</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Replace corresponding variable values with paths to compilers installed in your system:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ARM_PATH</code> for armcc compiler.</li>
  <li><code class="language-plaintext highlighter-rouge">GCC_ARM_PATH</code> for GCC ARM compiler.</li>
  <li><code class="language-plaintext highlighter-rouge">GCC_CS_PATH</code> for GCC CodeSourcery compiler.</li>
  <li><code class="language-plaintext highlighter-rouge">GCC_CR_PATH</code> for GCC CodeRed compiler.</li>
  <li><code class="language-plaintext highlighter-rouge">IAR_PATH</code> for IAR compiler.</li>
</ul>

<p>Workspace tools will use compiler’s path variable only if you explicit ask for it from command line. You need to replace only paths for your installed compilers.</p>

<p>Note: Settings in <code class="language-plaintext highlighter-rouge">private_settings.py</code> will overwrite variables with default values in <code class="language-plaintext highlighter-rouge">mbed/workspace_tools/settings.py</code> file.</p>

<p>###<strong>Build System</strong></p>

<p>The mbed build system is composed of two scripts:</p>

<ul>
  <li>workspace_tools/build.py to build the libraries</li>
  <li>workspace_tools/make.py to build and run the test projects</li>
</ul>

<p>Both share a subset of options to specify the target microcontroller and the toolchain:</p>

<blockquote>
  <p>-m MCU -t TOOLCHAIN</p>
</blockquote>

<p>If, for example, you want to build the mbed library for the LPC1768 mbed using the ARM GCC toolchain:</p>

<blockquote>
  <p>python workspace_tools\build.py -m LPC1768 -t GCC_ARM</p>
</blockquote>

<p>If you want to compile source files then issue the command in the root of 
project directory</p>

<blockquote>
  <p>python workspace_tools\make.py -m LPC1768 -t GCC_ARM</p>
</blockquote>

<h2 id="buildpy-script"><strong>build.py script</strong></h2>

<p>It is the core script  to drive compilation, linking and building process for:</p>

<ul>
  <li>mbed SDK (with libs like Ethernet, RTOS, USB, USB host).</li>
  <li>Tests which also can be linked with libraries like RTOS or Ethernet.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Build.py</code> script is a powerful tool to build mbed SDK for all available platforms using all supported by mbed cross-compilers. S</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python build.py --help
</code></pre></div></div>

<ul>
  <li>
    <p>The command line parameter <code class="language-plaintext highlighter-rouge">-m</code> specifies the <code class="language-plaintext highlighter-rouge">MCUs/platforms</code>for which you want to build the mbed SDK. More than one MCU(s)/platform(s) may be specified with this parameter using comma as delimiter.</p>

    <p>Example for one platform build:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ python build.py -m NUCLEO_F334R8 -t GCC_ARM
</code></pre></div>    </div>

    <p>or for many platforms:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ python build.py -m NUCLEO_F303RE,NUCLEO_F334R8 -t GCC_ARM
</code></pre></div>    </div>
  </li>
  <li>
    <p>Parameter <code class="language-plaintext highlighter-rouge">-t</code> defined which <code class="language-plaintext highlighter-rouge">toolchain</code> should be used for mbed SDK build. You can build Mbed SDK for multiple toolchains using one command.</p>
  </li>
  <li>
    <p>Below example will compile mbed SDK for Freescale Freedom KL25Z platform using ARM and GCC_ARM compilers:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ python build.py -m NUCLEO_F334R8 -t ARM,GCC_ARM
</code></pre></div>    </div>
  </li>
  <li>You can combine this technique to compile multiple targets with multiple compilers.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python build.py -m NUCLEO_F303RE,NUCLEO_F334R8 -t GCC_ARM,ARM
</code></pre></div>    </div>
  </li>
  <li>
    <p>Building libraries included in mbed SDK’s source code. Parameters <code class="language-plaintext highlighter-rouge">-r</code>, <code class="language-plaintext highlighter-rouge">-e</code>, <code class="language-plaintext highlighter-rouge">-u</code>, <code class="language-plaintext highlighter-rouge">-U</code>, <code class="language-plaintext highlighter-rouge">-d</code>, <code class="language-plaintext highlighter-rouge">-b</code> will add <code class="language-plaintext highlighter-rouge">RTOS</code>, <code class="language-plaintext highlighter-rouge">Ethernet</code>, <code class="language-plaintext highlighter-rouge">USB</code>, <code class="language-plaintext highlighter-rouge">USB Host</code>, <code class="language-plaintext highlighter-rouge">DSP</code>, <code class="language-plaintext highlighter-rouge">U-Blox</code> libraries respectively.</p>

    <p>Example</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ python build.py -m LPC1768 -t ARM -r -e
</code></pre></div>    </div>
  </li>
  <li>
    <p>You can be more verbose <code class="language-plaintext highlighter-rouge">-v</code> especially if you want to see each compilation / linking command build.py is executing:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ python build.py -t GCC_ARM -m LPC1768 -j 8 -v
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="build-mbed-sdk-library-from-sources"><strong>Build Mbed SDK library from sources</strong></h2>

<p>Now we look at how to compile the MBED SDK from sources using <code class="language-plaintext highlighter-rouge">build.py</code>  workspace tools script.</p>

<p>Go to the</p>

<p><code class="language-plaintext highlighter-rouge">mbed/workspace_tools/</code> directory  and type the following command to start the MBED SDK build for <a href="http://developer.mbed.org/platforms/mbed-LPC1768/">LPC1768</a> platform using ARM compiler.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python build.py -m LPC1768 -t GCC_ARM - j 4
</code></pre></div></div>

<p>For multi-threaded compilation please use option <code class="language-plaintext highlighter-rouge">-j X</code> where <code class="language-plaintext highlighter-rouge">X</code> is number of cores you want to use to compile mbed SDK.</p>

<p>We can see for a new directory <code class="language-plaintext highlighter-rouge">TARGET_LPC1768</code> was created in
 <code class="language-plaintext highlighter-rouge">build/mbed</code> directory which contains all the build primitives.</p>

<p><code class="language-plaintext highlighter-rouge">build/mbed</code> directory contains all the generic MBED header files which are required for user defined project while  <code class="language-plaintext highlighter-rouge">build/mbed/TARGET_LPC1768/</code> contains platform dependent header files required by user defined projects.</p>

<p><code class="language-plaintext highlighter-rouge">build/mbed/TARGET_LPC1768/TOOLCHAIN_GCC_ARM</code> contains mbed SDK library <code class="language-plaintext highlighter-rouge">libmbed.a</code></p>

<p>Workspace tools track changes in source code and  <code class="language-plaintext highlighter-rouge">build.py</code> script will recompile project with all dependencies in case of changes .</p>

<h2 id="makepy-script"><strong>make.py script</strong></h2>

<p><code class="language-plaintext highlighter-rouge">make.py</code> is a <code class="language-plaintext highlighter-rouge">mbed/workspace_tools/</code> script used to build user defined projects</p>

<p>The <code class="language-plaintext highlighter-rouge">make.py</code> script depends on existing already built mbed SDK and library sources so you need to pre-build mbed SDK and other libraries (such as RTOS library) to link user defined projects with mbed SDK and other mbed library. To pre-build mbed SDK please use <code class="language-plaintext highlighter-rouge">build.py</code> script.</p>

<p><code class="language-plaintext highlighter-rouge">make.py</code> shares  same  subset of options as <code class="language-plaintext highlighter-rouge">build.py</code> to specify the target microcontroller and the toolchain:</p>

<h3 id="directory-structure-for-user-defined-project-">**Directory Structure for User Defined Project **</h3>

<table>
  <tbody>
    <tr>
      <td>—mbed</td>
    </tr>
    <tr>
      <td>— workspace—src—project—Makefile</td>
    </tr>
    <tr>
      <td>— workspace—src—project—src</td>
    </tr>
    <tr>
      <td>— workpace—src—project—Readme.md</td>
    </tr>
  </tbody>
</table>

<p>###<strong>Makefile</strong></p>

<pre class="python">

DIRNAME=$(shell basename $(realpath ./))
MAKEFILE_PATH=$(realpath ../../../mbed/workspace_tools/make.py)
BUILD_DIR=$(realpath ../../build/)
SOURCE_PATH=$(realpath ./)
BUILD_PATH=$(BUILD_DIR)/$(DIRNAME)
MCU=NUCLEO_F334R8 #board or build profile name
TOOLCHAIN=GCC_ARM # tool chain
FLAGS="-D__STM__ -Wswitch"
all:
        $(MAKEFILE_PATH) --source=$(SOURCE_PATH) --build=$(BUILD_PATH) -m $(MCU) -t $(TOOLCHAIN) $(FLAGS) 

clean:
        rm -r $(BUILD_PATH)

help:
        $(MAKEFILE_PATH) --help

</pre>

<p>To get started with a  new project,simple create a new sub directory in <code class="language-plaintext highlighter-rouge">workspace</code> and copy the Makefile  ,and execute make to compile the project</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make 
</code></pre></div></div>

<p>Modify the  <code class="language-plaintext highlighter-rouge">FLAGS</code> variable in the <code class="language-plaintext highlighter-rouge">Makefile</code> to include command line options for including MBED libraries or other compilation options</p>

<p>###<strong>References</strong></p>

<ul>
  <li>https://developer.mbed.org/handbook/mbed-tools</li>
  <li>https://developer.mbed.org/teams/SDK-Development/wiki/Mbed-SDK-build-script-introduction</li>
</ul>

</article>
<div id="page-navigation"> 
        <div class="clear">&nbsp;</div> 
        <div class="left"> 
         
                <a href="/pyVision//2015/04/18/29/" title="Previous Post: 
OpenCV 2.4.11 Build from Sources for Linux and Android">&laquo; OpenCV 2.4.11 Build from Sources for Linux and Android</a> 
         
        </div> 

        <div class="right"> 
         
                <a href="/pyVision//embedded%20firmware/2015/09/06/embed1/" title="next Post: 
User Defined Library in MBED">User Defined Library in MBED &raquo; </a> 
         
        </div> 
        <div class="clear">&nbsp;</div> 
</div> 
<div id="disqus_thread"></div>
		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'pi19404'; // required: replace example with your forum shortname
    			var disqus_identifier = '/embedded%20firmware/2015/09/01/embed1/';
    			var disqus_url = 'http://pyvision.github.com/embedded%20firmware/2015/09/01/embed1/';       
 
			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





      </div>
    </div>

      
       <footer>
          pyVision is maintained by <a href="https://github.com/pi19404">pi19404</a><br>
        </footer>
    
    </div>
 <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = true;
        }, false);
      })(document);
    </script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pyvision'; // required: replace example with your forum shortname
    var disqus_identifier = '/embedded%20firmware/2015/09/01/embed1/';
    var disqus_url = 'http://pyvision.github.com/embedded%20firmware/2015/09/01/embed1/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>

  </body>
</html>
