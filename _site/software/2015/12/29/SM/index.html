<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
  <!-- Enable responsiveness on mobile devices-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">-->
 

  <title>
    
      State Machine Interface - Part 1 &middot; 
      pyVision
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/pyVision/public/css/poole.css">
  <link rel="stylesheet" href="/pyVision/public/css/syntax.css">
  <link rel="stylesheet" href="/pyVision/public/css/lanyon.css">
  <!--<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">-->
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/pyVisionpublic/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/pyVisionpublic/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({ 
                config: ["MMLorHTML.js"], 
                extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"], 
                jax: ["input/TeX"], 
                tex2jax: { 
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ], 
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ], 
                    processEscapes: false 
                }, 
                TeX: { 
                    TagSide: "right", 
                    TagIndent: ".8em", 
                    MultLineWidth: "85%", 
                    equationNumbers: { 
                       autoNumber: "AMS", 
                    }, 
                    unicode: { 
                       fonts: "STIXGeneral,'Arial Unicode MS'" 
                    } 
                }, 
                showProcessingMessages: false 
            }); 
</script>
<!--<script src="/pyVision/javascripts/gitdata.js"></script>-->
	<script type="text/javascript">
    	$(function() {
        $("#display-projects").getRepos("pi19404"); //Add your github username.
    	});
	</script>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<link href='http://alexgorbatchev.com/pub/sh/2.1.364/styles/shCore.css' rel='stylesheet' type='text/css'/> 
<link href='http://alexgorbatchev.com/pub/sh/2.1.364/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/> 
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shCore.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCpp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCSharp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushCss.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushJava.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushJScript.js' type='text/javascript' /> </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPhp.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPython.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushRuby.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushSql.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushVb.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushXml.js' type='text/javascript' > </script>
<script src='http://alexgorbatchev.com/pub/sh/2.1.364/scripts/shBrushPerl.js' type='text/javascript' > </script>
<script language='javascript'> 
SyntaxHighlighter.config.bloggerMode = false;
SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38535188-2', 'auto');
  ga('send', 'pageview');

</script>
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">





  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/pyVision/">Home </a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/pyVision//about/">About</a>
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    

    <!-- <a class="sidebar-nav-item" href="http://www.github.com/pi19404/pyVision/zipball/master">Download</a>
    <a class="sidebar-nav-item" href="http://www.github.com/pi19404/pyVision">GitHub project</a> -->
    <!-- <a class="sidebar-nav-item" ><g:plusone size="medium">Categories</g:plusone> </a> -->

    <div >
      <nav class="sidebar-nav-item">
        <g:plusone size="medium">Categories</g:plusone>
        
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/ai">
            AI
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/embedded-firmware">
            Embedded Firmware
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/linux">
            Linux
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/raspberry-pi">
            Raspberry PI
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/signal-processing">
            Signal Processing
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/software">
            Software
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/software-installation">
            Software Installation
         </a>
        
         
         <a class="sidebar-nav-item" href="/pyVision/category1/software-installation">
            Software installation
         </a>
        
      </nav>
    
    </div>
    <!-- <div>
      <ul>
        
        
        <li><a href="/pyVision//category/AI/index.html">AI</a></li>
        
        
        <li><a href="/pyVision//category/Signal+Processing/index.html">Signal Processing</a></li>
        
        
        <li><a href="/pyVision//category/Raspberry+PI/index.html">Raspberry PI</a></li>
        
        
        <li><a href="/pyVision//category/Linux/index.html">Linux</a></li>
        
        
        <li><a href="/pyVision//category/Software/index.html">Software</a></li>
        
        
        <li><a href="/pyVision//category/Embedded+Firmware/index.html">Embedded Firmware</a></li>
        
        
        <li><a href="/pyVision//category/Software+Installation/index.html">Software Installation</a></li>
        
        
        <li><a href="/pyVision//category/Software+installation/index.html">Software installation</a></li>
        
        </ul>
    
    </div> -->
<a class="sidebar-nav-item" >
<div class='g-person' data-href='https://plus.google.com/115840780257908006648' data-layout='landscape' data-rel='author' data-showcoverphoto='false' data-showtagline='false' data-theme='dark' data-width='100'></a>
</div>

<div class='widget-content'>
<script type="text/javascript" src="http://jj.revolvermaps.com/2/1.js?i=9bj6dpaloim&amp;s=220&amp;m=7&amp;v=true&amp;r=true&amp;b=ffffff&amp;n=false&amp;c=ff0000" async="async"></script>
</div>

<script type="text/javascript">
function cantload() {
img = document.getElementById("clustrMapsImg");
img.onerror = null;
img.src = "http://www2.clustrmaps.com/images/clustrmaps-back-soon.jpg";
document.getElementById("clustrMapsLink").href = "http://www2.clustrmaps.com";
}
img = document.getElementById("clustrMapsImg");
img.onerror = cantload;
</script>
<div class='widget-content'>
<div id="clustrmaps-widget"></div><script type="text/javascript">var _clustrmaps = {'url' : 'http://pi-virtualworld.blogspot.com', 'user' : 1165875, 'server' : '3', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2015-04-05', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www3.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript><a href="http://www3.clustrmaps.com/user/ace11ca33"><img src="http://www3.clustrmaps.com/stats/maps-no_clusters/pi-virtualworld.blogspot.com-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript>
</a>

<!-- Copyright (c)2009 Site Meter -->


</div>

<div class='widget-content'>
<script type="text/javascript" src="http://feedjit.com/serve/?vv=1022&amp;tft=3&amp;dd=0&amp;wid=f31e21a2d981f025&amp;pid=0&amp;proid=0&amp;bc=000000&amp;tc=F5F5F5&amp;brd1=454545&amp;lnk=C95050&amp;hc=FFFFFF&amp;hfc=5C5A5A&amp;btn=8A0214&amp;ww=200&amp;went=10"></script><noscript><a href="http://feedjit.com/">Feedjit Live Blog Stats</a></noscript>
</div>
 
<!-- Site Meter -->
<script type="text/javascript" src="http://s30.sitemeter.com/js/counter.js?site=s30pi19404">
</script>
<noscript>
<a href="http://s30.sitemeter.com/stats.asp?site=s30pi19404" target="_top">
<img src="http://s30.sitemeter.com/meter.asp?site=s30pi19404" alt="Site Meter" border="0"/></a>
</noscript>   
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2022. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      
        <div class="container">
          <h1 class="header">
            <a href="/" title="Home">pyVision</a></br>
            <small>A Machine Learning and Signal Processing toolbox</small>
          </h1>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/pi19404/pyVision/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/pi19404/pyVision/tarball/master" id="download-tar-gz" class="button"><span>Download.tar.gz</span></a>
          <a href="https://github.com/pi19404/pyVision" id="view-on-github" class="button"><span>View on GitHub</span></a>
		
	   <hr>
          </section>
    
	</br>	</br>
      <div class="content">
        <article class="post">
  <h1 class="post-title">State Machine Interface - Part 1</h1>
  <span class="post-date">29 Dec 2015</span>
  <h2 id="state-machine-interface"><strong>State Machine Interface</strong></h2>

<p>A State Machine is a design pattern in which actions are determined by events and the current context of the system. and are used most commonly to model the behavior of an object across its lifetime.</p>

<p>Hierarchical State Machines enable to structure the application into logical states which is effective and elegant way of decomposing event driven behavior.</p>

<h1 id="state"><strong>State</strong></h1>

<p>A state describes a period of time during the life cycle of object or program execution .It is a condition of an object which performs some activity or waits for an event.</p>

<p>A state is denoted by a round-cornered rectangle with the name of the state written inside it.</p>

<p>A state has several properties.</p>

<ul>
  <li>Name</li>
  <li>Entry/Exit Actions</li>
  <li>Internal Transitions</li>
  <li>Substates</li>
  <li>Deferred events</li>
</ul>

<p>We will look at the properties in detail below.</p>

<h1 id="initial-and-final-state"><strong>Initial and Final State</strong></h1>

<p>There are two special states that need to be defined for an objects state machine.The <code class="language-plaintext highlighter-rouge">initial</code> and <code class="language-plaintext highlighter-rouge">final</code> state.</p>

<p>The <code class="language-plaintext highlighter-rouge">initial state</code> is denoted by a filled black circle and indicates the default starting place for the state machine or sub-state.</p>

<p>The <code class="language-plaintext highlighter-rouge">final state</code> is denoted by a circle with a dot inside 
and indicates the completion of the execution of the state machine or that the enclosing state.</p>

<p>Both the <code class="language-plaintext highlighter-rouge">initial</code> and <code class="language-plaintext highlighter-rouge">final</code> states are pseudo states,both do not have usual properties of a normal state .</p>

<p>The program performs a transition to the next state immediately after entering the initial state automatically</p>

<h1 id="simple-state"><strong>Simple State</strong></h1>

<p>A <code class="language-plaintext highlighter-rouge">simple state</code> has no sub states. It can have entry and exit behaviors and deferred events and internal transitions.</p>

<p><img src="http://imgur.com/vIIrah5.png" alt="" /></p>

<p>In the above example the state transitions from <code class="language-plaintext highlighter-rouge">init</code> state to <code class="language-plaintext highlighter-rouge">Idle</code> state when the state machine is initiated.</p>

<p>The transition from <code class="language-plaintext highlighter-rouge">Idle</code> to <code class="language-plaintext highlighter-rouge">final</code> state happens when the <code class="language-plaintext highlighter-rouge">shutdown</code> signal event is received.</p>

<h1 id="entry-and-exit-behavior"><strong>Entry and Exit Behavior</strong></h1>

<p>One can provide entry and exit behaviors/actions to states which are executed when state is entered  or exited</p>

<p>Entry and exit actions allow the same action to be dispatched every time the state is entered or left, respectively</p>

<p>Note that the entry and exit Behavior is also executed if a self transition takes place.</p>

<p><img src="http://imgur.com/ELv3Dpa.png" alt="enter image description here" /></p>

<p>Upon entry into the state <code class="language-plaintext highlighter-rouge">init</code> function is called and before exit the <code class="language-plaintext highlighter-rouge">_exit</code> function is called</p>

<h1 id="actions"><strong>Actions</strong></h1>

<p>Once the entry behavior is complete the state machine enters the <code class="language-plaintext highlighter-rouge">run</code> state for the object.Various actions may be triggered depending on event that caused the state change and/or program status.As long as the object is the <code class="language-plaintext highlighter-rouge">run</code> state the <code class="language-plaintext highlighter-rouge">run</code> behavior is called every <code class="language-plaintext highlighter-rouge">run</code> cycle of the statemachine.</p>

<p>in the above example the <code class="language-plaintext highlighter-rouge">Idle.run</code> function is called every run cycle</p>

<p>Actions are also realized in a manner similar to <code class="language-plaintext highlighter-rouge">exit</code> and <code class="language-plaintext highlighter-rouge">entry</code> functions.</p>

<p><img src="http://imgur.com/gXAEk6v.png" alt="enter image description here" /></p>

<h1 id="transition"><strong>Transition</strong></h1>

<p>A transition is a relationship between two states indicating that an object in the first state will perform certain actions and enter a second state when a specified event occurs and specified conditions are satisfied.</p>

<p>On such a change of state, the transition is said to <code class="language-plaintext highlighter-rouge">fire</code>. Until the transition fires, the object is said to be in the <code class="language-plaintext highlighter-rouge">source</code> state; after it fires, it is said to be in the <code class="language-plaintext highlighter-rouge">target</code> state.</p>

<p>A transition has several properties:</p>

<ul>
  <li>source state</li>
  <li>target state</li>
  <li>event trigger</li>
  <li>guard condition</li>
  <li>action</li>
</ul>

<p>Transitions from one state to the next are denoted by lines with arrowheads. A transition may have a trigger, a guard and an action</p>

<h1 id="event-trigger"><strong>Event trigger</strong></h1>

<p>In the context of the state machine, an event is an occurrence of a stimulus that can trigger a state transition</p>

<p><img src="http://imgur.com/6Ibqs9v.png" alt="enter image description here" /></p>

<p>In the following example <code class="language-plaintext highlighter-rouge">complete</code> event triggers a transition from <code class="language-plaintext highlighter-rouge">Idle</code>
state to <code class="language-plaintext highlighter-rouge">finished</code> state</p>

<h1 id="guard-condition"><strong>Guard condition</strong></h1>

<p>A guard condition is evaluated after the trigger event for the transition occurs.</p>

<p>A guard condition is evaluated just once for the transition at the time the event occurs.</p>

<p>If the guard condition evaluates to <code class="language-plaintext highlighter-rouge">True</code> then transition is eligible to fire or if condition evaluates to <code class="language-plaintext highlighter-rouge">false</code> then transition does not fire.</p>

<p>It is possible to have multiple transitions from the same source state with the same event trigger ,as long as the guard conditions do not overlap.</p>

<p><img src="http://imgur.com/9PBwPha.png" alt="enter image description here" /></p>

<p>In the above example,the transition is triggered only when <code class="language-plaintext highlighter-rouge">complete</code> event is triggered and <code class="language-plaintext highlighter-rouge">done</code> flag is true.</p>

<h1 id="internal-transitions"><strong>Internal Transitions</strong></h1>

<p>Internal transitions allow events to be handled within the state without leaving the state, thereby avoiding triggering entry or exit actions.</p>

<p>Internal transitions may have events with parameters and guard conditions, and essentially represent interrupt-handlers.</p>

<p><img src="http://imgur.com/9PBwPha.png" alt="enter image description here" /></p>

<p>In the above example the <code class="language-plaintext highlighter-rouge">reset</code> is an internal transition,which sets <code class="language-plaintext highlighter-rouge">done</code> flag to true upon triggering of the event.</p>

<h1 id="substates"><strong>Substates</strong></h1>

<p>A simple state is one which has no substructure. A state which has substates (nested states) is called a composite state. Substates may be nested to any level. A nested state machine may have at most one initial state and one final state. Substates are used to simplify complex flat state machines by showing that some states are only possible within a particular context</p>

<p>From a source outside an enclosing composite state, a transition may target the composite state or it may target a substate.</p>

<p>If its target is the composite state, the nested state machine must include an initial state, to which control passes after entering the composite state and after dispatching its entry action (if any).</p>

<p><img src="http://imgur.com/0qxDXLR.png" alt="enter image description here" /></p>

<p>A transition leading out of a composite state may have as its source the composite state or a substate. In either case, control first leaves the nested state (and its exit action, if any, is dispatched), then it leaves the composite state (and its exit action, if any, is dispatched).</p>

<p><img src="http://imgur.com/IGSuxAd.png" alt="enter image description here" /></p>

<p>If its target is the nested state, control passes to the nested state after dispatching the entry action of the composite state (if any), and then the entry action of the nested state (if any).</p>

<h1 id="history-states"><strong>History States</strong></h1>

<p>Unless otherwise specified, when a transition enters a composite state, the action of the nested state machine starts over again at the initial state (unless the transition targets a sub-state directly). History states allow the state machine to re-enter the last sub-state that was active prior to leaving the composite state.</p>

<h1 id="choice"><strong>Choice</strong></h1>

<p>Choice is also a pseudo state. It can be used to model a conditional path. Choice nodes divide a transition into multiple parts.</p>

<p>Usually the first transition points towards the choice node. One of the choice outgoing transitions can carry a condition.</p>

<h1 id="junction"><strong>Junction</strong></h1>

<p>A junction is a pseudo state do combine transitions. This is very comfortable if a state machine has many similar transitions. Junctions add clear arrangement to the state machine.</p>

<h2 id="implementation-details"><strong>Implementation Details</strong></h2>

<p>We will look at the <code class="language-plaintext highlighter-rouge">YAKINDU</code> state chart tool.YAKINDU Statechart Tools provides a rich feature set to supports custom code generators out of the box.</p>

<p>we will take this as reference for implementing state machines.It is a modular and simple structure.</p>

<p>The interface for the state machine is as follows</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class StatemachineInterface {
	public:
	
		virtual ~StatemachineInterface() = 0;
		
		/*
		* Initializes the statemachine. Use to init internal variables etc.
		*/
		virtual void init() = 0;
	
		/*
		* Enters the statemachine. Sets the statemachine in a defined state.
		*/
		virtual void enter() = 0;
	
		/*
		* Exits the statemachine. Leaves the statemachine with a defined state.
		*/
		virtual void exit() = 0;
	
		/*
		* Start a run-to-completion cycle.
		*/
		virtual void runCycle() = 0;
		
		/*
		* Checks if the statemachine is active. 
	 	* A statemachine is active if it was entered. It is inactive if it has not been entered at all or if it was exited.
	 	*/	
		virtual	sc_boolean isActive() = 0;
		
		/*
		* Checks if all active states are final. 
	 	* If there are no active states then the statemachine is considered as inactive and this method returns false.
	 	*/
		virtual sc_boolean isFinal() = 0;
};
}

</code></pre></div></div>

<p>Let us consider the implementation of following state machine
<img src="http://imgur.com/IGSuxAd.png" alt="enter image description here" /></p>

<p>The state machine realizes the abstract class . The default name is name of state machine
in this case its <code class="language-plaintext highlighter-rouge">HSMTest</code></p>

<p>Each state and associated regions are maintained in a list</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
		typedef enum {
			_region1__final_,
			_region1_main,
			_region1_main_r1_Idle,
			HSMTest_last_state
		} HSMTestStates;
		
</code></pre></div></div>

<p>The members of <code class="language-plaintext highlighter-rouge">HSMTest</code></p>
<ul>
  <li>class corresponding to Each state</li>
  <li>interface or abstract class corresponding to functions of <code class="language-plaintext highlighter-rouge">entry,exit,action</code></li>
</ul>

<p>For example :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
				class SCI_Idle_OCB {
					public:
						virtual ~SCI_Idle_OCB() = 0;
						
						virtual void init() = 0;
						
						virtual void _exit() = 0;
						
						virtual void run() = 0;
				};
	
				class SCI_Master_OCB {
					public:
						virtual ~SCI_Master_OCB() = 0;
						
						virtual void init() = 0;
						
						virtual void _exit() = 0;
				};
	

</code></pre></div></div>

<p>The state machine provide setter methods to pass the instances of abstract class.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
void setSCI_Master_OCB(SCI_Master_OCB* operationCallback);
void setSCI_Idle_OCB(SCI_Idle_OCB* operationCallback);

</code></pre></div></div>

<p>Each state is implemented as class.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

		class SCI_Idle {
			
			public:
				/*! Raises the in event 'complete' that is defined in the interface scope 'Idle'. */ 
				void raise_complete();
				
				/*! Raises the in event 'reset' that is defined in the interface scope 'Idle'. */ 
				void raise_reset();
				
				/*! Gets the value of the variable 'done' that is defined in the interface scope 'Idle'. */ 
				sc_boolean get_done();
				
				/*! Sets the value of the variable 'done' that is defined in the interface scope 'Idle'. */ 
				void set_done(sc_boolean value);
				
				
			private:
				friend class HSMTest;
				sc_boolean complete_raised;
				sc_boolean reset_raised;
				sc_boolean done;
		}; 
		
	
</code></pre></div></div>
<p>The events are boolean variable .
For example the <code class="language-plaintext highlighter-rouge">complete</code> event is mapped to <code class="language-plaintext highlighter-rouge">complete_raised</code> boolean variable
with function <code class="language-plaintext highlighter-rouge">raise_complete</code> to raise event.</p>

<p>The variables are implemented as members of the class .
For example the <code class="language-plaintext highlighter-rouge">done</code> variable is a private member with setter and getter methods
 <code class="language-plaintext highlighter-rouge">set_done</code> and <code class="language-plaintext highlighter-rouge">get_done</code> respectively.</p>

<p>The State machine returns objects corresponding to state.Which can be used to access members .</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SCI_Idle* getSCI_Idle();
SCI_Idle_OCB* ifaceIdle_OCB;
SCI_Master* getSCI_Master();
SCI_Master_OCB* ifaceMaster_OCB;
</code></pre></div></div>

<p>The state machine maintains a list of active states in a vector</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HSMTestStates stateConfVector[maxOrthogonalStates];
</code></pre></div></div>

<p>The maxOrthogonalStates states defines the maximum number of concurrent active states .</p>

<p>During each run cycle the the <code class="language-plaintext highlighter-rouge">run</code> behavior of each is state is executed.
It also checks if flag corresponding to events have be set in the <code class="language-plaintext highlighter-rouge">source</code> state
If yes then then any actions configured to be executed at transition are executed first followed by the transition behavior.Else default run behavior is executed.
The transition behavior consists of re-configuring the set of active states to the <code class="language-plaintext highlighter-rouge">target</code> state.</p>

<p>Below is the application code for using the state machine where we implement interfaces,pass objects to state machine,and simulate the event to observe the state machine flow</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/*
 * HSMTest.cpp
 *
 *  Created on: 31-Dec-2015
 *      Author: Prashant
 */
#include &lt;iostream&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include "../../src-gen/HSMTest.h"
using namespace std;

//interface for Idle state
class Idle : public HSMTest::SCI_Idle_OCB
{
public:

	void init()
	{
			cerr &lt;&lt; "idle init " &lt;&lt; endl;
	}

	void _exit()
	{
			cerr &lt;&lt; "idle exit " &lt;&lt; endl;
	 }

	void run()
	{
		cerr &lt;&lt; "idle run " &lt;&lt; endl;
	}
};

//interface for master state
class Master : public HSMTest::SCI_Master_OCB
{

public:
		 void _exit()
		{
			cerr &lt;&lt; "master exit " &lt;&lt; endl;
		}

		void init()
		{
			cerr &lt;&lt; "master init " &lt;&lt; endl;
		}
};

//main function
int main()
{
	HSMTest s;
	Idle i;
	Master m;
	s.setSCI_Idle_OCB(&amp;i);
	s.setSCI_Master_OCB(&amp;m);
	s.init();
	s.runCycle();
	s.enter();
	s.runCycle();
	for (int i = 0; i &lt; 2; i++) {
		sleep(1);
		s.runCycle();
	}
	s.runCycle();
			 
	s.getSCI_Idle()-&gt;raise_complete();
	s.runCycle();
			
	cerr &lt;&lt; "done" &lt;&lt; endl;


}
</code></pre></div></div>

<h2 id="download-and-installation"><strong>Download and Installation</strong></h2>

<p><strong>PreRequisites</strong></p>
<ul>
  <li>Windows - cygwin</li>
  <li>Linux gcc</li>
  <li>java</li>
</ul>

<p><strong>Download</strong>
Download the yakindu State Chart tool from <code class="language-plaintext highlighter-rouge">http://statecharts.org/</code>.
Its eclipse based and open-source,windows and java versions are available.</p>

<p>Just download and unizip the package to get started.</p>

<p><strong>Launch</strong>
Launch the <code class="language-plaintext highlighter-rouge">SCT</code> executable to start the GUI.</p>

<ul>
  <li>File-&gt;Create-&gt;Project
To launch the <code class="language-plaintext highlighter-rouge">New Project</code> creation wizard.</li>
</ul>

<p><img src="http://imgur.com/CfJFOjU.png" alt="enter image description here" /></p>

<p><strong>Create Project</strong>
Select java or C/C++ project depending on if you want to auto-generate C/C++ or java code</p>

<p>Here C++ project was chosen</p>

<p>Enter the name of the project ,select the suitable toolchain
and click on <code class="language-plaintext highlighter-rouge">Finish</code> to create the project.</p>

<p><strong>Creating state-chart</strong>
Create a new <code class="language-plaintext highlighter-rouge">state-chart</code> model to get started to begin creating
state machine model.</p>

<p><img src="http://imgur.com/yVrI7FU.png" alt="enter image description here" /></p>

<p>In the GUI configure the states,interfaces and transitions</p>

<p><img src="http://imgur.com/uSA9KFl.png" alt="enter image description here" /></p>

<p><strong>Configure code generator</strong>
To create a generator model with the wizard,</p>

<ul>
  <li>Click <code class="language-plaintext highlighter-rouge">Project &gt; New &gt; Code Generator Model</code></li>
  <li>Type a name and click Next</li>
  <li>Choose the desired generator, i.e. <code class="language-plaintext highlighter-rouge">YAKINDU C++ Code Generator</code></li>
  <li>Check the model(s) to generate code from and click Finish</li>
</ul>

<p><img src="http://imgur.com/MSMaepQ.png" alt="enter image description here" /></p>

<p><img src="http://imgur.com/zFKSzvA.png" alt="enter image description here" /></p>

<p>This will generate the <code class="language-plaintext highlighter-rouge">state-chart</code> files in <code class="language-plaintext highlighter-rouge">src-gen</code> directories.</p>

<p><img src="http://imgur.com/Wc83VV7.png" alt="enter image description here" /></p>

<p><strong>Application code</strong>
In the src directory we create the application source file <code class="language-plaintext highlighter-rouge">HSMTest_app.cpp</code></p>

<p><strong>Build</strong>
upon triggering the project build it will create <code class="language-plaintext highlighter-rouge">Debug</code> the folder and auto-generate makefiles can create <code class="language-plaintext highlighter-rouge">HTest.exe</code> binary</p>

<p><img src="http://imgur.com/moCvIKA.png" alt="enter image description here" /></p>

<p><strong>Launch</strong>
The binary can be launched in <code class="language-plaintext highlighter-rouge">cygwin</code> shell for execution</p>

<p><img src="http://imgur.com/Zh8JJ4Z.png" alt="enter image description here" /></p>

<h2 id="references">References</h2>

<ul>
  <li>http://statecharts.org/documentation.html</li>
  <li>http://statecharts.org/tutorial.html</li>
  <li>http://sce.uhcl.edu/helm/rationalunifiedprocess/process/modguide/md_stadm.htm</li>
  <li>http://www.boost.org/doc/libs/1_60_0/libs/msm/doc/HTML/ch02s02.html</li>
</ul>


</article>
<div id="page-navigation"> 
        <div class="clear">&nbsp;</div> 
        <div class="left"> 
         
                <a href="/pyVision//software%20installation/2015/12/28/STLinkInstall/" title="Previous Post: 
STLink Installation on Ubuntu 14.04">&laquo; STLink Installation on Ubuntu 14.04</a> 
         
        </div> 

        <div class="right"> 
         
                <a href="/pyVision//software%20installation/2015/12/31/STM32Cube/" title="next Post: 
STM32 Cube Download">STM32 Cube Download &raquo; </a> 
         
        </div> 
        <div class="clear">&nbsp;</div> 
</div> 
<div id="disqus_thread"></div>
		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'pi19404'; // required: replace example with your forum shortname
    			var disqus_identifier = '/software/2015/12/29/SM/';
    			var disqus_url = 'http://pyvision.github.com/software/2015/12/29/SM/';       
 
			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





      </div>
    </div>

      
       <footer>
          pyVision is maintained by <a href="https://github.com/pi19404">pi19404</a><br>
        </footer>
    
    </div>
 <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = true;
        }, false);
      })(document);
    </script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pyvision'; // required: replace example with your forum shortname
    var disqus_identifier = '/software/2015/12/29/SM/';
    var disqus_url = 'http://pyvision.github.com/software/2015/12/29/SM/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>

  </body>
</html>
